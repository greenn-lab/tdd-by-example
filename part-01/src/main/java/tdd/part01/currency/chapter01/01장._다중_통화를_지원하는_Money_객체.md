# 다중 통화를 지원하는 Money 객체

보고서가 있어요.

|종목|주|가격|합계|
|---|--:|--:|--:|
|IBM|1000|25|25000|
|GE|400|100|40000|
|||sum|65000|

이런 보고서를 다중 통화를 지원하는 보고서로 만들어요.

|종목|주|가격|합계|
|---|--:|--:|--:|
|IBM|1000|25USD|25000USD|
|Novartis|400|150CHF|60000CHF|
|||sum|65000USD|

그리고 밑에 환율도 보여주고요.

|기준|변환|환율|
|---|---|---|
|CHF|USD|1.5|

잘 작동 되는 코드라면 어떤 기능이 필요한지, 어떤걸 해야지 완성됐다고 생각할 수 있는지 보면,

- 통화가 다른 두 금액을 더해서 주어진 환율에 맞게 변환한 금액이 나오고,
- 어떤 금액(주가)을 어떤 수(주식의 수)에 곱한 금액을 구할 수 있으면

되는 거라는 거죠.  
중요한 건 **작은 것 부터 시작하는 게 좋다** 고 하네요. 

그래서 일단 바로 코드를 만들라고.

```java
public void testMultiplication() {
    Dollar five = new Dollar(5);
    five.times(2);
    assertEquals(10, five.amount);
}
```

1. 작은 테스트를 하나 추가하고,
2. 모든 테스트를 실행해서 실패하는 것을 확인하고,
3. 조금 수정하고, ("조금" 이란 게 핵심일 것 같은 느낌...)
4. 다시 모든 테스트를 실행해서 이제 성공시키고,
5. 중복을 제거하기 위해 리펙토링

어떤 걸 정리해야 할 지 모를 정도로 너무 간단한 걸 해버리니까... 
암튼, 
```java
class Dollar {
    public int amount;

    void time(int multiplier) {
        amount *= multiplier; 
    }
    // ...
}
```

> 5USD + 10CHF = 10USD (환율 2:1 적용)  
> ~~5USD * 2 = 10USD~~  
> amount 를 private 로 만들기  
> Dollar 의 부작용 ?  
> Money 의 반올림 ?

이제 하나 해결 했다는데 엄청난 성과가 있었다고 `우쭈쭈` 해주는 게
- 작업해야 할 테스트 목록을 만들었고,
- 오퍼레이션이 외부에서 어떻게 보여지길 원하는지 말해주는 이야기를 코드로 표현했고,
- JUnit 에 대한 상세한 사항은 잠시 무시하기로 했고,
- 스텁 구현을 통해 테스트를 컴파일 성공,
- 잔혹하게 테스트를 통과해 버렸고,
- ...
