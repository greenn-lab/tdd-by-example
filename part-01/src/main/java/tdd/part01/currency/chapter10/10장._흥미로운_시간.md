# ìš°ë¦¬ê°€ ì‚¬ëŠ” ì‹œê°„
ê³±í•˜ê¸° `times` ë¡œ ì–¸ì–´ìœ í¬ì— ë§›ë“¤ë¦° ë°±ì„ ìƒë‹˜.

> 5USD + 10CHF = 10USD (í™˜ìœ¨ 2:1 ì ìš©)    
> ~~5USD * 2 = 10USD~~    
> ~~amount ë¥¼ private ë¡œ ë§Œë“¤ê¸°~~    
> ~~Dollar ì˜ ë¶€ìž‘ìš© ?~~    
> Money ì˜ ë°˜ì˜¬ë¦¼ ?  
> ~~equals()~~  
> hashCode()    
> Equal null    
> Equal object    
> ~~5KRW * 2 = 10KRW~~   
> Dollar/Korea Won ì¤‘ë³µ  
> ~~ê³µìš© equals~~  
>*__ê³µìš© times__
> ~~KRWon ê³¼ Dollar ë¹„êµí•˜ê¸°~~
> ~~í†µí™”?~~  
> killing testKRWonMultiplication()

ë”ì´ìƒ `Dollar` ëž‘ `KRWon` ì„ ë™ì¼í•˜ê²Œ ë§Œë“¤ê¸° ìœ„í•œ ë°©ë²•ì´ ì—†ì–´ ë³´ì´ë„¤ìš”.
ë¹„ìŠ·í•˜ê²Œ ë§Œë“¤ë ¤ë©´ ì•„ë¬´ëž˜ë„ Method Factory Pattern ìœ¼ë¡œ ê°ì²´ë¥¼ ë§Œë“œëŠ” ê±¸ ë’¤ì§‘ì–´ì•¼ í•  ê²ƒ ê°™ì•„ìš”.

```java
public class Dollar extends Money {
  // ...  
  public Money times(int multiplier) {
    return new Dollar(amount * multiplier, currency);
  }
}

public class KRWon extends Money {
  // ...
  public Money times(int multiplier) {
    return new KRWon(amount * multiplier, currency);
  }
}
```
ì´ëž˜ ë†“ê³  ë‚˜ë‹ˆê¹Œ ì–´ì°¨í”¼ `currency` ê°€ USD ì´ê±°ë‚˜ KRW ë¥¼ ë‚˜íƒ€ë‚´ëŠ”ë° êµ³ì´ í´ëž˜ìŠ¤ë¥¼ `Dollar` ì´ë‚˜ `KRWon` ì„ ì“¸ í•„ìš” ì—†ì„ ê²ƒ ê°™ì•„ìš”.
ë°”ê¾¸ëŠ”ê²Œ ë”±ížˆ ì–´ë µì§„ ì•Šì€ë° ë°±ì„ ìƒë‹˜ê»˜ì„œëŠ” êµ‰ìž¥ížˆ ì¡°ì‹¬ìŠ¤ë ˆ ì–˜ê¸°í•˜ì„¸ìš”.

```java
public class Dollar extends Money {
  // ...  
  public Money times(int multiplier) {
    return new Money(amount * multiplier, currency);
  }
}

public class KRWon extends Money {
  // ...
  public Money times(int multiplier) {
    return new Money(amount * multiplier, currency);
  }
}
```
ì¼ë‹¨ ì›í•˜ëŠ”ëŒ€ë¡œ ì½”ë“œë¥¼ ë°”ê¿¨ë”ë‹ˆ ì»´íŒŒì¼ ì˜¤ë¥˜ê°€ ë‚˜ì£ . í•˜ì§€ë§Œ  
ë˜‘ê°™ì•„ì¡Œì–´ìš”. ì´ì œ í•˜ë‚˜ë¡œ í•©ì¹˜ë©´ ë˜ê² ë„¤ìš”. `Money` ë¡œ `times(...)` ë¥¼ ì˜¬ë ¤ìš”!
ë©”ì„œë“œëŠ” ëŒ€ì¶© Stub ìœ¼ë¡œ ë„˜ê¸°ì£ , ì‚¬ì•…í•˜ê³  ì¶”ì•…í•˜ê³  ì•…ëž„í•˜ì§€ë§Œ...
```java
public /*abstrct*/ class Money {
  // ...
  public /*abstract*/ Money times(int multiplier) {
    return null;
  }
}
```
ì§œìž”! ì´ì œ ë‹¤ì‹œ í…ŒìŠ¤íŠ¸... í•˜ì§€ë§Œ ì‹¤íŒ¨ ðŸ˜±    
ì´ê²Œ ë­ëžŒ.  
![](IMG001.png)  

```java
public class Money {
  // ...
  @Override
  public String toString() {
    return "Money{" +
        "amount=" + amount +
        ", currency='" + currency + '\'' +
        '}';
  }
}
```
ì¼ë‹¨ ë©”ëª¨ë¦¬ ì°¸ì¡°ëœ ê°’ì´ ì½˜ì†”ì— ë‚˜ì˜¤ë‹ˆê¹Œ `toString()` êµ¬í˜„í•˜ëŠ”ë°,... ì•„ì°¸! í…ŒìŠ¤íŠ¸ëŠ” ì–´ì©Œê³ ?!
- í™”ë©´ì— ê²°ê³¼ë¥¼ í™•ì¸í•˜ë ¤ë˜ ì°¸ì´ë‹ˆê¹Œ (ê¸°ëŠ¥ì„ í™•ì¸í•˜ëŠ”ê²Œ ì•„ë‹ˆë¼ "ê²°ê³¼")
- ì–´ì°¨í”¼ `toString()` ì€ ì¶œë ¥ì—ë§Œ ì“°ì´ë‹ˆê¹Œ ì €ê²Œ ìž˜ëª»ë  ê°€ëŠ¥ì„±ì´ ì ê³ 
- ì´ë¯¸ í…ŒìŠ¤íŠ¸ ê¹¨ì ¸ì„œ ë¹¨ê°„ë§›ì„ ë´¤ëŠ”ë°, ë˜ë‹¤ë¥¸ í…ŒìŠ¤íŠ¸ëŠ” ë§Œë“¤ì§€ ì•Šê¸°ë¡œ...

í•‘ê³„ê±°ë¦¬ê°€ ë§Žì§€ë§Œ, ê°œê°œì¸ì˜ ì˜ì‹ìˆ˜ì¤€ì— ë§žì¶°ì„œ ìš”ì •ë„ì¯¤ì€ ì˜ˆì™¸ë¥¼ í•´ë„ ëœë‹¤ê³  ê¸°ì¤€ì„ ìž¡ì•„ì£¼ëŠ” ê²ƒ ê°™ì•„ìš”.

![](IMG002.png)  
í•œê²° ë³´ê¸° íŽ¸í•˜ì§€ë§Œ ê·¸ëž˜ë„ ê¹¨ì ¸ì„œ ë¶‰ê²Œ ë¬¼ë“  í…ŒìŠ¤íŠ¸ì—¬...  
ëˆˆë¬¼ì„ ë¨¸ê¸ˆê³ , ìš°ë¦¬ì˜ ì›ì¹™ëŒ€ë¡œ ë‹¤ì‹œ ì´ˆë¡ ë§‰ëŒ€ë¡œ ë˜ëŒë ¤ìš”.

```java
class KRWon {
  // ...
  public Money times(int multiplier) {
    return new KRWon/*Money*/(amount * multiplier, currency);
  }
}
```
ì•„ë¦„ë“œë¦¬ í‘¸ë¥´ë¥¸ ì´ˆë¡ì˜ ë´„ë‚ ì´ ì˜¨ ê²ƒ ê°™ì§€ë§Œ, ë­”ê°€ ì”ì“¸í•˜ë‹¤.
![](IMG003.png)  

`KRwon(10, "KRW")` ì´ê±°ëž‘ `Money(10, "KRW")` ì´ê²Œ ê°™ê¸¸ ë°”ë¼ëŠ”ê²Œ ê·¸ë ‡ê²Œë„ ì•ˆë  ì¼ì¸ê°€?!
> í¬ê¸°ëŠ” ì—†ì–´~ ë‚˜ë¥¼ ë¯¿ê³  í•´ì•¼ í•  ì¼ì„ í•´~~ðŸŽ¶
> - ì•ˆë‚˜, ê²¨ìš¸ì™•êµ­2

ì €ê±¸ í…ŒìŠ¤íŠ¸ë¡œ ë§Œë“œëŠ” ê±°ì—ìš”!

```java
class MoneyTest {
  // ...
  @Test
  void testDifferentClassEquality() {
    assertTrue(
        new Money(10, "KRW")
            .equals(new KRWon(10, "KRW"))
      );
  }
}
```

![](IMG004.png)  

ì•„! ì´ì œ ì•Œì•˜ì–´!!  
ë²”ì¸ì€ `equals(...)` ì•ˆì— ìžˆë‹¤! 
![](IMG005.png)

ê·¸ëž˜! **í´ëž˜ìŠ¤ ë¹„êµ** êµ¬ë¬¸ì´ì—ˆì–´!!! `currency` ê°€ `KRW` ëž‘ `USD` ë¡œ ì“°ì¸ë‹¤ê³ , ê°™ê²Œ ë§Œë“¤ë ¤ê³  `KRWon` ì´ëž‘ `Dollar` ë¥¼ `Money` ë¡œ ë°”ê¿¨ì—ˆìž–ì•„! 
ê·¸ë ‡ë‹¤ë©´ `equals(...)` ëŠ” í´ëž˜ìŠ¤ë¥¼ ë¹„êµí•˜ì§€ ë§ê³ , `currency` ë¥¼ ë¹„êµí–ˆì–´ì•¼í•´!
```java
class MoneyTest {
  // ...
  @Override
  public boolean equals(Object object) {
    Money money = (Money) object;
    return amount == money.amount
        && currency().equals(money.currency());
  }
}
```

ê·¸ëž˜! ë‹¤ì‹œ ë˜ëŒë¦¬ê³  í…ŒìŠ¤íŠ¸ í•´ë³´ìž.
```java
class KRWon extends Money {
  // ...
  public Money times(int multiplier) {
    return new Money(amount * multiplier, currency);
  }
}
```
![](IMG006.png)  

ì´ì   `Dollar` ë„ ë°”ê¾¸ëŠ”ê±°ì•¼.
```java
class Dollar extends Money {
  // ...
  public Money times(int multiplier) {
    return new Money(amount * multiplier, currency);
  }
}
```
![](IMG006.png)  

~~íƒì •ë†€ì´ ë.~~  
ì½”ë“œê°€ ê°™ì•„ì¡Œìœ¼ë‹ˆê¹Œ ìƒìœ„ í´ëž˜ìŠ¤ë¡œ ì´ë™!

```java
class Money {
  // ...
  public Money times(int multiplier) {
    return new Money(amount * multiplier, currency);
  }
}
```
![](IMG007.png)  



> 5USD + 10CHF = 10USD (í™˜ìœ¨ 2:1 ì ìš©)    
> ~~5USD * 2 = 10USD~~    
> ~~amount ë¥¼ private ë¡œ ë§Œë“¤ê¸°~~    
> ~~Dollar ì˜ ë¶€ìž‘ìš© ?~~    
> Money ì˜ ë°˜ì˜¬ë¦¼ ?  
> ~~equals()~~  
> hashCode()    
> Equal null    
> Equal object    
> ~~5KRW * 2 = 10KRW~~   
> Dollar/Korea Won ì¤‘ë³µ  
> ~~ê³µìš© equals~~  
> ~~ê³µìš© times~~
> ~~KRWon ê³¼ Dollar ë¹„êµí•˜ê¸°~~
> ~~í†µí™”?~~  
> killing testKRWonMultiplication()

